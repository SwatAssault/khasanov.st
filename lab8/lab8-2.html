<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Хасанов Р.М. ИВТ-417</title>
    <script src="jquery.js"></script>
</head>
<body>
    <h2><a href="lab8.php">На главную</a></h2>

    <style>
        .invalid {
            border-color: red;
            border-width: 2px;
        }
    </style>

    <script>
        $(document).ready(function(){

            $('#form').submit(function(e) {
                e.preventDefault();
                var name = $('#name').val();
                var email = $('#email').val();
                var password = $('#password').val();
                var passwordConfirm = $('#password_confirm').val();
                var message = $('#msg').val();
                var msg_title = $('#msg_title').val();

                var ok = true;
                $('.error').remove();

                if (name.length < 1) {
                    $('#name').addClass("invalid");
                    $('#name').after('<span class="error">Заполните поле</span>');
                    ok = false;
                } else {
                    $('#name').removeClass("invalid");
                }
                if (!email.includes('@')) {
                    $('#email').addClass("invalid");
                    $('#email').after('<span class="error">Неверный email</span>');
                    ok = false;
                } else {
                    $('#email').removeClass("invalid");
                }
                if (password.length < 5) {
                    $('#password').addClass("invalid");
                    $('#password').after('<span class="error">Пароль должен содержать не менее 5 символов</span>');
                    ok = false;
                } else {
                    $('#password').removeClass("invalid");
                }
                if(passwordConfirm !== password || passwordConfirm == '') {
                    $('#password_confirm').addClass("invalid");
                    $('#password_confirm').after('<span class="error">Пароли не совпадают</span>');
                    ok = false;
                } else {
                    $('#password_confirm').removeClass("invalid");
                }
                if (message.length < 10) {
                    $('#msg').addClass("invalid");
                    $('#msg').after('<span class="error">Сообщение не должно быть менее 10 символов</span>');
                    ok = false;
                } else {
                    $('#msg').removeClass("invalid");
                }

                if (ok) {
                    alert("Успех");
                }

            });

        });

        function removeRedBorders() {
            $('#name').removeClass("invalid");
            $('#msg').removeClass("invalid");
            $('#password_confirm').removeClass("invalid")
            $('#password').removeClass("invalid");
            $('#email').removeClass("invalid");
            $('.error').remove();
        }

    </script>

    <H2>Заполните поля:</H2>
    <form id="form" method="post" action="">

        <p>Ваше имя: <input id="name" size="50" type="text" onchange="removeRedBorders();">
        <p><br>Пароль: <input id="password" size="20" type="password" onchange="removeRedBorders();">
        <p><br>Подтверждение пароля: <input id="password_confirm" size="20" type="password" onchange="removeRedBorders();">
        <p><br>Е-mail: <input id="email" size="30" type="text" onchange="removeRedBorders();">
        
        <p><br>Тема сообщения: <input id="msg_title" size="30" type="text">
        <p><br>Сообщение: <textarea id="msg" rows="4" cols="40" onchange="removeRedBorders();">
        </textarea>

        <p><br><input type="submit" value="Отправить" />
        <p><br><input id="id" type="reset" value="Очистить"></p>
    </form>

</body>
</html>