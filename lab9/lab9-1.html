<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Хасанов Р.М. ИВТ-417</title>
    <link rel="stylesheet" type="text/css" href="lab9-1.css">
    <script src="jquery.js"></script>
</head>
<body>
    <h2><a href='lab9.php'>На главную</a></h2>
    <script>
        $(document).ready(function(){
            
            var currentAmount = 5;
            var loadAmount = 5;

            $('input').click(function(){
                $.ajax({
                    method: "POST",
                    url: "lab9-1.php",
                    data: { 
                        currentAmount: currentAmount,
                        loadAmount: loadAmount 
                    },
                    success: function(response) {
                        news = JSON.parse(response);
                        news.forEach(element => {
                            element = JSON.parse(element);
                            insertDiv(element.title, element.newsText, element.img);
                        });
                        
                    }
                });
            });
            
            function getLastDiv() {
                return $('#news' + currentAmount);
            }

            function insertDiv(title, text, img) {
                lastDiv = getLastDiv();
                currentAmount += 1;
                lastDiv.after(
                    "<div id='news" + currentAmount + "'  class='news-block'>" + 
                        "<h2>" + currentAmount + ' ' + title + "</h2>" + 
                        "<div class='content'>" +
                            "<img src='images/" + img + "' alt='Нет'>" + 
                            "<p>" + text + "</p>" +
                        "</div>" +
                    "</div>"
                );
            }

        });
    </script>

    <h1>Новости</h1>

    <div id="wrapper">
        <div id="news1" class="news-block">
            <h2>1 Заголовок должен быть актуальным</h2>
            <div class="content">
                <img src="images/pic1.jpg" alt="Нет">
                <p>Минут через десять Тарвин начал догадываться, что все эти усталые, 
                    измученные люди представляли интересы полдюжины различных фирм Калькутты и 
                    Бомбея. Как и каждую весну, они без всякой надежды на успех осаждали королевский дворец, 
                    пытаясь получить хоть что-то по счетам с должника, которым был сам король. Его Величество 
                    заказывал все подряд, без разбору, и в огромных количествах — расплачиваться же за покупки 
                    очень не любил.
                </p>
            </div>
        </div>
        <div id="news2" class="news-block">
            <h2>2 Заголовок должен интриговать</h2>
            <div class="content">
                <img src="images/pic2.jpg" alt="Нет">
                <p>Итак, по одну сторону стоял сам политический резидент государства,
                     посаженный на это место для того, чтобы обучать короля искусству управления,
                      и главное, экономии и бережливости, а по другую сторону — точнее сказать, у 
                      дворцовых ворот, обыкновенно находился коммивояжер, в душе которого боролись 
                      презрение к злостному неплательщику и присущее каждому англичанину благоговение
                       перед королем.
                </p>
            </div>
        </div>
        <div id="news3" class="news-block">
            <h2>3 Заголовки — наше все</h2>
            <div class="content">
                <img src="images/pic3.jpg" alt="Нет">
                <p>Уже было начало июня, когда князь Андрей, возвращаясь домой, въехал опять в ту березовую рощу, в которой этот старый, корявый дуб так странно и памятно поразил его. Бубенчики еще глуше звенели в лесу, чем полтора месяца тому назад; все было полно, тенисто и густо; и молодые ели, рассыпанные по лесу, не нарушали общей красоты и, подделываясь под общий характер, нежно зеленели пушистыми молодыми побегами.
                </p>
            </div>
        </div>
        <div id="news4" class="news-block">
            <h2>4 Интернет-читатели стали более искушенными</h2>
            <div class="content">
                <img src="images/pic4.jpg" alt="Нет">
                <p>Целый день был жаркий, где-то собиралась гроза, но только небольшая тучка брызнула на пыль дороги и на сочные листья. Левая сторона леса была темна, в тени; правая мокрая, глянцовитая блестела на солнце, чуть колыхаясь от ветра. Все было в цвету; соловьи трещали и перекатывались то близко, то далеко.
                </p>
            </div>
        </div>
        <div id="news5" class="news-block">
            <h2>5 Но как написать заголовок</h2>
            <div class="content">
                <img src="images/pic5.jpg" alt="Нет">
                <p>Сквозь жесткую, столетнюю кору пробились без сучков сочные, молодые листья, так что поверить нельзя было, что этот старик произвел их. «Да, это тот самый дуб», подумал князь Андрей, и на него вдруг нашло беспричинное, весеннее чувство радости и обновления. Все лучшие минуты его жизни вдруг в одно и то же время вспомнились ему. 
                </p>
            </div>
        </div>
    </div>

    <div class="btn">
        <input type="button" value="Загрузить еще" />
    </div>
    

</body>
</html>